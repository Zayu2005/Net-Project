# 🎬 实时传输动画可视化功能

## ✨ 功能特性

### 1. **数据包移动动画**
- 橙色圆球代表数据包，沿着路径逐跳移动
- 使用平滑的缓动动画（easeInOutQuad）
- 数据包带有发光效果（shadowBlur）

### 2. **逐跳延迟显示**
- 每一跳都会显示实际延迟时间（单位：ms）
- 延迟标签位于链路中央，醒目显示
- 延迟时间影响动画播放速度（延迟越大，动画越慢）

### 3. **智能路径高亮**
- 当前传输的节点：**橙色**高亮，带发光效果
- 路径中的节点：**红色**高亮
- 其他节点：蓝色默认
- 当前传输的链路：**橙色**加粗，带阴影

### 4. **动画状态显示**
- 工具栏显示当前传输进度："第 X/Y 跳"
- Loading图标配合文字提示
- 脉冲动画效果增强视觉反馈

### 5. **重播功能**
- 传输完成后，"重播动画"按钮自动出现
- 可以随时重新观看传输过程
- 动画播放期间按钮自动禁用

## 🎯 使用方法

1. **选择源节点和目标节点**
   - 在工具栏的下拉框中选择节点
   - 或直接在拓扑图上点击节点

2. **选择路由算法**
   - Dijkstra（最短路径）
   - OSPF（开放最短路径优先）
   - RIP（路由信息协议）
   - BGP（边界网关协议）

3. **点击"开始传输"**
   - 系统自动计算路由
   - 执行数据传输
   - 生成封装数据
   - **自动播放动画** ✨

4. **重播动画**
   - 点击"重播动画"按钮
   - 重新观看数据包传输过程

## 🎨 视觉效果

### 节点颜色说明
- 🔵 **蓝色** - 普通节点
- 🔴 **红色** - 路径中的节点
- 🟠 **橙色** - 当前传输的节点（闪烁发光）

### 链路颜色说明
- ⚫ **灰色** - 未使用的链路
- 🔴 **红色** - 路径中的链路
- 🟠 **橙色** - 当前传输的链路（加粗发光）

### 数据包
- 🟠 **橙色圆球** - 移动的数据包
- 🔥 **发光效果** - 突出显示

## 🎮 交互控制

| 操作 | 说明 |
|------|------|
| 点击节点 | 设置源/目标节点 |
| 开始传输 | 启动路由计算和动画 |
| 重播动画 | 重新播放传输过程 |
| 悬停节点 | 查看节点详细信息 |
| 悬停链路 | 查看带宽和延迟 |

## 🔧 技术实现

### 核心技术
- **ECharts Graphic API** - 绘制动画图形
- **JavaScript Interval** - 控制动画帧
- **Promise/Async** - 异步控制逐跳播放
- **Vue 3 Reactivity** - 状态管理

### 动画算法
```javascript
// 缓动函数（easeInOutQuad）
const easeProgress = progress < 0.5
  ? 2 * progress * progress
  : 1 - Math.pow(-2 * progress + 2, 2) / 2

// 动画时长 = 延迟 × 100（最少500ms）
const duration = Math.max(delay * 100, 500)
```

### 性能优化
- 使用`requestAnimationFrame`替代方案（60 FPS）
- 及时清理定时器避免内存泄漏
- 组件卸载时自动清理所有动画

## 📊 动画参数

| 参数 | 默认值 | 说明 |
|------|--------|------|
| 数据包半径 | 12px | 圆球大小 |
| 动画帧数 | 60 | 每跳的帧数 |
| 最小时长 | 500ms | 每跳最短动画时间 |
| 延迟倍率 | 100 | 延迟转动画时长的系数 |
| 发光半径 | 10px/20px | 阴影模糊范围 |

## 🐛 故障排查

### 动画不播放
- ✅ 确保路径计算成功
- ✅ 检查是否有至少2个节点的路径
- ✅ 查看浏览器控制台错误信息

### 动画卡顿
- ✅ 减少网络规模（节点数）
- ✅ 检查其他后台任务
- ✅ 尝试降低动画复杂度

### 坐标位置错误
- ✅ 确保ECharts图表已完全渲染
- ✅ 检查窗口大小变化
- ✅ 刷新页面重新加载

## 🎓 教学建议

这个动画功能非常适合用于：

1. **课堂演示**
   - 直观展示路由算法工作原理
   - 对比不同算法的路径选择
   - 演示网络延迟的影响

2. **学生实验**
   - 观察数据包的传输过程
   - 理解OSI七层模型
   - 分析路由性能

3. **网络研究**
   - 测试不同拓扑结构
   - 评估算法效率
   - 模拟网络故障

## 🚀 未来扩展

可能的增强方向：

- [ ] 支持暂停/继续动画
- [ ] 调节动画速度（0.5x, 1x, 2x）
- [ ] 显示数据包内容预览
- [ ] 支持多数据包并发传输
- [ ] 添加音效反馈
- [ ] 导出动画为视频/GIF

---

**享受你的动画可视化体验！** 🎉
